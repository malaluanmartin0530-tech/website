<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Enchanted Rose</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Audio Element for Beauty and the Beast Theme -->
    <audio id="bgMusic" loop>
        <source src="beauty-and-the-beast.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            background: #122139;
            overflow: hidden;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .content {
            text-align: center;
            color: #fff;
            font-family: 'Arial', sans-serif;
            position: relative;
            z-index: 10;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            max-width: 80%;
        }
        
        h1 {
            color: #ffb3d1;
            text-shadow: 0 0 10px #ff4e85;
        }
        
        .container {
            position: absolute;
            width: 100px;
            height: 300px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            cursor: pointer;
        }
        
        .container div {
            position: absolute;
        }
        
        .glass {
            height: 420px;
            width: 250px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            border-radius: 300px 300px 0 0;
            left: -80px;
            top: -100px;
            border-bottom: 15px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            z-index: 100;
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }
        
        .glass:hover {
            border-color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .glass::after {
            content: 'Tap to Break the Spell';
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            text-align: center;
            opacity: 0.8;
            white-space: nowrap;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            transition: all 0.3s ease;
        }
        
        .glass:hover::after {
            opacity: 1;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }
        
        .glass:after, .glass:before {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.28);
            border-radius: 100px;
            left: 10px;
        }
        
        .glass:after {
            width: 8px;
            height: 80px;
            top: 180px;
        }
        
        .glass:before {
            width: 8px;
            height: 15px;
            top: 280px;
        }
        
        .glow {
            position: absolute;
            width: 170px;
            height: 170px;
            border-radius: 50%;
            border: 1px solid rgba(245, 148, 184, 0.47);
            box-shadow: 0 0 10px #f594b8;
            left: -40px;
            top: -40px;
            transition: all 0.5s ease;
            animation: glowing 2.5s ease-in-out infinite;
        }
        
        .rose-petals > div {
            background: #d52d58;
            width: 45px;
            height: 80px;
            position: absolute;
            transition: all 0.5s ease-out;
        }
        
        .rose-petals > div:nth-child(1) {
            border-radius: 15px;
            left: 20px;
            top: -6px;
            background: #d52d58;
        }
        
        .rose-petals > div:nth-child(2),
        .rose-petals > div:nth-child(4),
        .rose-petals > div:nth-child(6) {
            border-radius: 0 30px 0 30px;
            background: #b81b43;
            left: 0;
            transform-origin: bottom right;
        }
        
        .rose-petals > div:nth-child(3),
        .rose-petals > div:nth-child(5),
        .rose-petals > div:nth-child(7) {
            border-radius: 30px 0 30px 0;
            left: 40px;
            transform-origin: bottom left;
        }
        
        /* Petal animations */
        .rose-petals > div:nth-child(2) {
            animation: openRose2 3s ease-in-out forwards;
            z-index: 5;
            background: #9e183a;
            top: 10px;
            height: 70px;
            animation-delay: 2s;
        }
        
        .rose-petals > div:nth-child(3) {
            animation: openRose3 3s ease-in-out forwards;
            z-index: 4;
            background: #9e183a;
            top: 10px;
            height: 70px;
            animation-delay: 2s;
        }
        
        .rose-petals > div:nth-child(4) {
            animation: openRose4 3s ease-in-out forwards;
            z-index: 3;
            background: #b81b43;
            top: 5px;
            height: 75px;
            animation-delay: 2s;
        }
        
        .rose-petals > div:nth-child(5) {
            animation: openRose5 3s ease-in-out forwards;
            z-index: 2;
            background: #b81b43;
            top: 5px;
            height: 75px;
            animation-delay: 2s;
        }
        
        .rose-petals > div:nth-child(6) {
            animation: openRose6 3s ease-in-out forwards;
            z-index: 1;
            background: #c9204b;
            animation-delay: 2s;
        }
        
        .rose-petals > div:nth-child(7) {
            animation: openRose7 3s ease-in-out forwards;
            z-index: 0;
            background: #c9204b;
            animation-delay: 2s;
        }
        
        .rose-leaves > div:first-child {
            width: 6px;
            height: 230px;
            background: #066406;
            top: 80px;
            left: 40px;
        }
        
        .rose-leaves > div:last-child {
            width: 55px;
            height: 30px;
            background: #338f37;
            top: 140px;
            left: 15px;
            border-radius: 100px;
        }
        
        .thorns > div {
            width: 30px;
            height: 30px;
            background: #066406;
            top: 100px;
            left: 10px;
        }
        
        .thorns > div:after,
        .thorns > div:before {
            content: "";
            position: absolute;
            width: 41px;
            height: 31px;
            border-radius: 50%;
            background: #122139;
        }
        
        .thorns > div:after {
            left: -12px;
            top: 17px;
        }
        
        .thorns > div:before {
            left: -11px;
            top: -11px;
            z-index: 0;
        }
        
        .thorns > div:nth-child(2) {
            top: 150px;
            transform: rotate(180deg);
            left: 45px;
        }
        
        .thorns > div:nth-child(3) {
            top: 180px;
        }
        
        .thorns > div:nth-child(4) {
            top: 220px;
            transform: rotate(180deg);
            left: 45px;
        }
        
        .sparkles {
            bottom: -40px;
        }
        
        .sparkles > div {
            width: 4px;
            height: 4px;
            border-radius: 100px;
            background: #ff96c0;
            box-shadow: 0 0 12px 2px #ff4e85;
            bottom: 0;
            opacity: 0;
            position: absolute;
            animation: sparkle 4s ease-in-out infinite;
        }
        
        .sparkles > div:nth-child(1) { left: 60px; animation-delay: 3s; }
        .sparkles > div:nth-child(2) { left: 158px; animation-delay: 2s; }
        .sparkles > div:nth-child(3) { left: -22px; animation-delay: 1s; }
        .sparkles > div:nth-child(4) { left: 10px; animation-delay: 1s; }
        .sparkles > div:nth-child(5) { left: 177px; animation-delay: 3s; }
        .sparkles > div:nth-child(6) { left: -82px; animation-delay: 2s; }
        .sparkles > div:nth-child(7) { left: 45px; animation-delay: 3s; }
        .sparkles > div:nth-child(8) { left: 74px; animation-delay: 3s; }
        .sparkles > div:nth-child(9) { left: -79px; animation-delay: 2s; }
        .sparkles > div:nth-child(10) { left: 100px; animation-delay: 1s; }
        
        /* Animations */
        @keyframes glowing {
            50% { box-shadow: 0 0 60px #f594b8; }
        }
        
        @keyframes sparkle {
            0% { opacity: 0; transform: translateY(0); }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { opacity: 0; transform: translateY(-250px); }
        }
        
        @keyframes openRose2 {
            50% {
                transform: rotate(-90deg);
                top: 80px;
                left: 100px;
            }
            100% {
                transform: rotate(-60deg);
                top: 210px;
                left: -30px;
            }
        }
        
        @keyframes openRose3 {
            100% { transform: rotate(60deg); }
        }
        
        @keyframes openRose4 {
            100% { transform: rotate(-30deg); }
        }
        
        @keyframes openRose5 {
            100% { transform: rotate(30deg); }
        }
        
        @keyframes openRose6 {
            100% { transform: rotate(-15deg); }
        }
        
        @keyframes openRose7 {
            100% { transform: rotate(15deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                transform: translate(-50%, -50%) scale(0.6);
            }
            
            .content {
                font-size: 0.9em;
                max-width: 90%;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                transform: translate(-50%, -50%) scale(0.5);
            }
            
            .content h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="glass"></div>
        <div class="thorns">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="glow"></div>
        <div class="rose-leaves">
            <div></div>
            <div></div>
        </div>
        <div class="rose-petals">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="sparkles">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    
    <div class="typing-container">
        <p id="typing-text" class="typing-text"></p>
    </div>
    
    <div class="controls">
        <button id="musicToggle" class="control-btn">
            <i class="fas fa-music"></i>
            <span>Music: Off</span>
        </button>
        <button id="resetBtn" class="control-btn">
            <i class="fas fa-redo"></i>
            <span>Reset</span>
        </button>
        <button id="nextBtn" class="control-btn">
            <i class="fas fa-arrow-right"></i>
            <span>Next</span>
        </button>
    </div>
    
    <script>
        // DOM Elements
        const container = document.querySelector('.container');
        const glass = document.querySelector('.glass');
        const petals = document.querySelectorAll('.rose-petals > div');
        const resetBtn = document.getElementById('resetBtn');
        const musicToggle = document.getElementById('musicToggle');
        const music = document.getElementById('bgMusic');
        let glassRemoved = false;
        
        // Music toggle functionality
        musicToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            if (music.paused) {
                music.play().then(() => {
                    musicToggle.innerHTML = '<i class="fas fa-music"></i><span>Music: On</span>';
                }).catch(e => console.log('Music play failed:', e));
            } else {
                music.pause();
                musicToggle.innerHTML = '<i class="fas fa-music"></i><span>Music: Off</span>';
            }
        });
        
        // Function to reset animations
        function resetAnimations() {
            // Pause music when resetting
            const music = document.getElementById('bgMusic');
            music.pause();
            music.currentTime = 0;
            
            // Reset glass to original state with animation
            glass.style.display = 'block';
            glass.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            
            // Trigger reflow to ensure the display:block is applied before the opacity change
            void glass.offsetWidth;
            
            glass.style.opacity = '1';
            glass.style.transform = 'scale(1) rotate(0deg)';
            glassRemoved = false;
            
            // Reset transition after animation completes
            setTimeout(() => {
                glass.style.transition = 'none';
            }, 800);
            
            // Reset petal animations
            petals.forEach(petal => {
                const style = petal.style;
                style.animation = 'none';
                style.opacity = '0';
                void petal.offsetWidth; // Trigger reflow
            });
            
            // Re-add animations with delay
            setTimeout(() => {
                petals.forEach((petal, index) => {
                    petal.style.animation = `openRose${index + 2} 3s ease-in-out forwards`;
                    petal.style.animationDelay = '0.5s';
                    petal.style.opacity = '1';
                });
            }, 100);
        }
        
        // Function to remove glass with animation
        function removeGlass() {
            if (glassRemoved) return;
            
            // Start playing the music
            const music = document.getElementById('bgMusic');
            music.volume = 0.5; // Set volume to 50%
            music.play().catch(e => console.log('Music play failed:', e));
            
            glass.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            glass.style.opacity = '0';
            glass.style.transform = 'scale(1.5) rotate(15deg)';
            
            // Remove glass after animation
            setTimeout(() => {
                glass.style.display = 'none';
                glassRemoved = true;
                glass.style.transition = 'none'; // Reset transition for next time
            }, 800);
            
            // Animate petals
            resetAnimations();
        }
        
        // Event Listeners
        glass.addEventListener('click', removeGlass);
        
        resetBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            resetAnimations();
        });
        
        // Typing animation
        const typingText = document.getElementById('typing-text');
        const message = "Salamat sa pagiging totoong kaibigan, Isay Nephilim. Sa bawat araw na magkausap tayo sa chat, magkausap sa call nagiging masaya ako palagi, Gustong gusto  kitang kilalanin nang lubusan - ang iyong mga pangarap, takot, at ang lahat ng nagpapasaya sa'yo. Hindi ako nagmamadali, dahil ang bawat sandali kasama ka ay mahalaga. Gusto kong malaman ang bawat kwento sa likod ng iyong mga ngiti at luha. Maraming salamat sa pagtitiwala at pagmamahal na ipinadama mo sa akin. Hindi ko man madalas sabihin, ngunit isa ka sa pinakamahalagang tao sa buhay ko. Mahal na mahal kita, at masaya akong kasama ka sa bawat yugto ng aking buhay. Isang araw, kapag handa na tayong dalawa, sana ay maging tayo na. Mahal na mahal kita, Isay Nephilim.";
        let charIndex = 0;
        let isDeleting = false;
        let typingSpeed = 100; // milliseconds per character
        
        function type() {
            const currentText = message.substring(0, charIndex);
            typingText.textContent = currentText;
            typingText.classList.add('typing');
            
            if (!isDeleting && charIndex < message.length) {
                typingText.classList.add('visible');
                charIndex++;
                setTimeout(type, typingSpeed);
            } else if (isDeleting && charIndex > 0) {
                charIndex--;
                setTimeout(type, typingSpeed / 1);
            } else {
                isDeleting = !isDeleting;
                typingText.classList.remove('typing');
                setTimeout(type, isDeleting ? 3000 : 1000);
            }
        }
        
        // Start typing animation after a delay
        setTimeout(() => {
            typingText.classList.add('visible');
            setTimeout(type, 1000);
        }, 2000);
        
        // Initial animation
        setTimeout(resetAnimations, 1000);
        
        // Next button functionality
        document.getElementById('nextBtn').addEventListener('click', function() {
            const typingText = document.getElementById('typing-text');
            typingText.textContent = 'Loading next page in 3 seconds...';
            typingText.style.animation = 'none';
            
            // Disable all buttons during the delay
            const buttons = document.querySelectorAll('.control-btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
            });
            
            // Navigate after 3 seconds
            setTimeout(() => {
                window.location.href = 'final.html'; // Change this to your target HTML file
            }, 3000);
        });
        
    </script>
    
    <style>
        /* Controls */
        .controls {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            z-index: 1000;
            pointer-events: none;
        }
        
        .control-btn {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .control-btn i {
            font-size: 16px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                transform: translate(-50%, -50%) scale(0.7);
            }
            
            .glass::after {
                font-size: 12px;
                bottom: -50px;
            }
            
            .controls {
                bottom: 10px;
            }
            
            .control-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                transform: translate(-50%, -50%) scale(0.6);
            }
            
            .glass::after {
                content: 'Tap to Break';
                font-size: 11px;
                bottom: -40px;
            }
            
            .control-btn {
                padding: 5px 10px;
                font-size: 11px;
            }
            
            .control-btn:not(#musicToggle):not(#nextBtn) span {
                display: none;
            }
            
            #nextBtn {
                background: linear-gradient(45deg, #ff4e85, #f594b8);
                border: 2px solid #fff;
            }
            
            .control-btn i {
                margin: 0;
            }
        }
        
        /* Typing animation styles */
        .typing-container {
            position: fixed;
            bottom: 80px;
            left: 0;
            right: 0;
            text-align: center;
            z-index: 1000;
            pointer-events: none;
        }
        
        .typing-text {
            display: inline-block;
            color: #fff;
            font-family: 'Playfair Display', serif;
            font-size: 1.2em;
            text-shadow: 0 0 10px rgba(255, 78, 133, 0.8);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
            max-width: 80%;
            margin: 0 auto;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(5px);
        }
        
        .typing-text.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .typing-text::after {
            content: '|';
            animation: blink 1s step-end infinite;
            opacity: 0;
        }
        
        .typing-text.typing::after {
            opacity: 1;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Landscape mode for mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                transform: translate(-50%, -50%) scale(0.5);
            }
            
            .controls {
                bottom: 5px;
            }
        }
    </style>
</body>
</html>

